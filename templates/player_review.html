{% extends "index.html" %}

{% block title %}{{ card['season_name'] }}-{{ card['player_name'] }} ë¦¬ë·°{% endblock %}

{% block content %}
<div class="container" style="max-width: 1200px; margin: 40px auto; padding: 0 20px;">

    <!-- ìƒë‹¨: ë’¤ë¡œê°€ê¸° + ì‹œì¦Œ-ì´ë¦„ + ë¦¬ë·° ì‘ì„± (í•œ ì¤„) -->
    <div style="background: var(--card-bg); padding: 20px 30px; border-radius: 12px; margin-bottom: 30px;">
        <div style="display: flex; align-items: center; justify-content: space-between; gap: 20px;">
            <!-- ì™¼ìª½: ë’¤ë¡œê°€ê¸° -->
            <a href="javascript:history.back()" class="back-btn"
                style="display: inline-block; padding: 10px 20px; border: 2px solid #667eea; border-radius: 8px; color: var(--text-primary); text-decoration: none; transition: all 0.3s; white-space: nowrap;">
                â† ë’¤ë¡œ ê°€ê¸°
            </a>

            <!-- ì¤‘ì•™: ì‹œì¦Œ + ì´ë¦„ -->
            <div style="display: flex; align-items: center; gap: 15px; flex: 1; justify-content: center;">
                <img src="{{ card.image_info.season_img }}" alt="{{ card.season_name }}"
                    style="width: 60px; height: 60px; object-fit: contain;">
                <h2 style="color: var(--text-primary); margin: 0; font-size: 2.5rem; font-weight: 700;">
                    {{ card.player_name }}
                </h2>
            </div>

            <!-- ì˜¤ë¥¸ìª½: ë¦¬ë·° ì‘ì„± ë²„íŠ¼ -->
            <button id="toggleWriteBtn" onclick="toggleWriteForm()"
                style="padding: 10px 20px; background: #10b981; color: white; border: none; border-radius: 8px; font-weight: 600; cursor: pointer; transition: all 0.3s; white-space: nowrap;">
                âœï¸ ë¦¬ë·° ì‘ì„±
            </button>
        </div>
    </div>

    <!-- í›„ê¸° ì‘ì„± í¼ (ê¸°ë³¸ ìˆ¨ê¹€) -->
    <div id="writeForm"
        style="display: none; background: var(--card-bg); padding: 30px; border-radius: 12px; margin-bottom: 30px;">
        <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px;">
            <h4 style="color: var(--text-primary); margin: 0;">âœï¸ í›„ê¸° ì‘ì„±í•˜ê¸°</h4>
            <button onclick="toggleWriteForm()"
                style="padding: 6px 12px; background: var(--bg-secondary); color: var(--text-secondary); border: 1px solid var(--border-color); border-radius: 6px; cursor: pointer;">
                ë‹«ê¸°
            </button>
        </div>

        <form method="POST" action="/player_review/{{ card.spid }}/write">
            <!-- ì‘ì„±ì (ë¹„ë¡œê·¸ì¸ ì‹œì—ë§Œ í‘œì‹œ) -->
            {% if not session.get('user_id') %}
            <div style="margin-bottom: 15px;">
                <label style="color: var(--text-primary); font-weight: 500; margin-bottom: 8px; display: block;">
                    ì‘ì„±ì <span style="color: #ff4444;">*</span>
                </label>
                <input type="text" name="author" value="ìµëª…" required maxlength="100" class="form-control"
                    style="background: var(--bg-main); border: 1px solid var(--border-color); color: var(--text-primary); padding: 10px; border-radius: 6px;">
            </div>
            {% else %}
            <!-- ë¡œê·¸ì¸ ìƒíƒœ: ì‘ì„±ì í‘œì‹œ -->
            <div style="margin-bottom: 15px;">
                <label style="color: var(--text-primary); font-weight: 500; margin-bottom: 8px; display: block;">
                    ì‘ì„±ì
                </label>
                <div
                    style="background: var(--bg-main); border: 1px solid var(--border-color); color: var(--text-primary); padding: 10px; border-radius: 6px; opacity: 0.7;">
                    {{ session.get('user_name', 'ìµëª…') }}
                </div>
            </div>
            {% endif %}

            <!-- ë¹„ë°€ë²ˆí˜¸ ì…ë ¥ (ë¹„ë¡œê·¸ì¸ ì‹œì—ë§Œ í‘œì‹œ) -->
            {% if not session.get('user_id') %}
            <div style="margin-bottom: 15px;">
                <label style="color: var(--text-primary); font-weight: 500; margin-bottom: 8px; display: block;">
                    ë¹„ë°€ë²ˆí˜¸ <span style="color: #ff4444;">*</span>
                </label>
                <input type="password" name="password" required maxlength="50" placeholder="ì‚­ì œ ì‹œ í•„ìš”í•œ ë¹„ë°€ë²ˆí˜¸"
                    class="form-control"
                    style="background: var(--bg-main); border: 1px solid var(--border-color); color: var(--text-primary); padding: 10px; border-radius: 6px;">
            </div>
            {% endif %}

            <!-- í‰ì  (ì„ íƒ) -->
            <div style="margin-bottom: 15px;">
                <label style="color: var(--text-primary); font-weight: 500; margin-bottom: 8px; display: block;">
                    í‰ì  (ì„ íƒ)
                </label>
                <select name="rating" class="form-select"
                    style="background: var(--bg-main); border: 1px solid var(--border-color); color: var(--text-primary); padding: 10px; border-radius: 6px;">
                    <option value="">ì„ íƒ ì•ˆ í•¨</option>
                    <option value="10">â­ 10ì  - ìµœê³ !</option>
                    <option value="9">â­ 9ì  - ë§¤ìš° ì¢‹ìŒ</option>
                    <option value="8">â­ 8ì  - ì¢‹ìŒ</option>
                    <option value="7">â­ 7ì  - ê´œì°®ìŒ</option>
                    <option value="6">â­ 6ì  - ë³´í†µ</option>
                    <option value="5">â­ 5ì  - ê·¸ì € ê·¸ëŸ¼</option>
                    <option value="4">â­ 4ì  - ì•„ì‰¬ì›€</option>
                    <option value="3">â­ 3ì  - ë³„ë¡œ</option>
                    <option value="2">â­ 2ì  - ë‚˜ì¨</option>
                    <option value="1">â­ 1ì  - ìµœì•…</option>
                </select>
            </div>

            <!-- í›„ê¸° ë‚´ìš© -->
            <div style="margin-bottom: 20px;">
                <label style="color: var(--text-primary); font-weight: 500; margin-bottom: 8px; display: block;">
                    í›„ê¸° ë‚´ìš© <span style="color: #ff4444;">*</span>
                </label>
                <textarea name="content" required rows="5" placeholder="ì´ ì„ ìˆ˜ë¥¼ ì‚¬ìš©í•œ ê²½í—˜ì„ ê³µìœ í•´ì£¼ì„¸ìš”..." class="form-control"
                    style="background: var(--bg-main); border: 1px solid var(--border-color); color: var(--text-primary); padding: 12px; border-radius: 6px; resize: vertical;"></textarea>
            </div>

            <!-- ì‘ì„± ë²„íŠ¼ -->
            <button type="submit" class="btn btn-success" style="padding: 10px 30px; font-weight: 600;">
                ì‘ì„± ì™„ë£Œ
            </button>
        </form>
    </div>

    <!-- í›„ê¸° ëª©ë¡ -->
    <div style="background: var(--card-bg); padding: 30px; border-radius: 12px; margin-bottom: 30px;">
        <h3 style="color: var(--text-primary); margin-bottom: 20px;">
            ğŸ’¬ ì„ ìˆ˜ í›„ê¸° ({{ reviews|length }})
        </h3>

        {% if reviews %}
        <div style="display: flex; flex-direction: column; gap: 20px;">
            {% for review in reviews %}
            {% if not review.parent_comment_id %}
            <!-- ì¼ë°˜ í›„ê¸° -->
            <div
                style="padding: 20px; background: var(--bg-secondary); border-radius: 8px; border-left: 3px solid var(--primary-color); {% if review.is_deleted %}background: rgba(255, 0, 0, 0.05) !important;{% endif %}">
                <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 10px;">
                    <div style="display: flex; align-items: center; gap: 15px;">
                        {% if review.is_deleted and session.get('user_role') == 'admin' %}
                        <span
                            style="background: #ef4444; color: white; padding: 2px 8px; border-radius: 4px; font-size: 0.75rem; margin-right: 6px;">ì‚­ì œë¨</span>
                        {% endif %}
                        <span style="color: var(--text-primary); font-weight: 600;">{{ review.author }}</span>
                        <span style="color: var(--text-muted); font-size: 0.85em;">{{ review.ip_display }}</span>
                        {% if review.rating %}
                        <span style="color: #fbbf24; font-weight: 600;">â­ {{ review.rating }}/10</span>
                        {% endif %}
                    </div>
                    <div style="display: flex; align-items: center; gap: 10px;">
                        <span style="color: var(--text-secondary); font-size: 0.9rem;">
                            {{ review.created_at.strftime('%Y-%m-%d %H:%M') }}
                        </span>
                        {% if not review.is_deleted %}
                        <button onclick="showReplyForm({{ review.id }})" class="btn btn-sm btn-outline-info"
                            style="padding: 2px 10px; font-size: 0.8rem;">
                            ëŒ“ê¸€
                        </button>
                        <button onclick="deleteReview({{ review.id }})" class="btn btn-sm btn-outline-danger"
                            style="padding: 2px 10px; font-size: 0.8rem;">
                            ì‚­ì œ
                        </button>
                        {% if session.get('user_role') == 'admin' %}
                        <button onclick="adminDeleteReview({{ review.id }})" class="btn btn-sm btn-danger"
                            style="padding: 2px 10px; font-size: 0.8rem;">
                            ğŸ”§ ê´€ë¦¬ìì‚­ì œ
                        </button>
                        {% endif %}
                        {% endif %}
                    </div>
                </div>
                <p style="color: var(--text-primary); margin: 0 0 15px 0; line-height: 1.6;">
                    {{ review.content }}
                </p>
                <div style="display: flex; align-items: center; gap: 10px; justify-content: flex-end;">
                    <button onclick="voteReview({{ review.id }}, 'like')" class="vote-btn like-btn"
                        style="background: none; border: 1px solid var(--border-color); padding: 5px 10px; border-radius: 6px; cursor: pointer; transition: all 0.3s; display: flex; align-items: center; gap: 5px; color: var(--text-secondary);">
                        <span style="font-size: 1.1rem;">ğŸ‘</span>
                        <span id="likes-{{ review.id }}">{{ review.likes }}</span>
                    </button>
                    <button onclick="voteReview({{ review.id }}, 'dislike')" class="vote-btn dislike-btn"
                        style="background: none; border: 1px solid var(--border-color); padding: 5px 10px; border-radius: 6px; cursor: pointer; transition: all 0.3s; display: flex; align-items: center; gap: 5px; color: var(--text-secondary);">
                        <span style="font-size: 1.1rem;">ğŸ‘</span>
                        <span id="dislikes-{{ review.id }}">{{ review.dislikes }}</span>
                    </button>
                </div>

                <!-- ëŒ€ëŒ“ê¸€ ì‘ì„± í¼ (ìˆ¨ê²¨ì§„ ìƒíƒœ) -->
                <div id="replyForm-{{ review.id }}"
                    style="display: none; margin-top: 15px; padding-left: 20px; border-left: 3px solid var(--border-color);">
                    <form method="POST" action="/player_review/{{ card.spid }}/write"
                        style="padding: 15px; background: var(--card-bg); border-radius: 8px;">
                        <input type="hidden" name="parent_comment_id" value="{{ review.id }}">

                        {% if not session.get('user_id') %}
                        <div class="mb-2">
                            <input type="text" name="author" value="ìµëª…" required maxlength="100" placeholder="ì‘ì„±ì"
                                class="form-control"
                                style="background: var(--bg-main); border: 1px solid var(--border-color); color: var(--text-primary); padding: 8px; border-radius: 6px; max-width: 200px; font-size: 0.9rem;">
                        </div>
                        <div class="mb-2">
                            <input type="password" name="password" required maxlength="50" placeholder="ë¹„ë°€ë²ˆí˜¸"
                                class="form-control"
                                style="background: var(--bg-main); border: 1px solid var(--border-color); color: var(--text-primary); padding: 8px; border-radius: 6px; max-width: 200px; font-size: 0.9rem;">
                        </div>
                        {% endif %}

                        <textarea name="content" required rows="3" placeholder="ë‹µê¸€ì„ ì…ë ¥í•˜ì„¸ìš”" class="form-control"
                            style="background: var(--bg-main); border: 1px solid var(--border-color); color: var(--text-primary); padding: 10px; border-radius: 6px; resize: vertical; font-size: 0.9rem;"></textarea>

                        <div style="margin-top: 10px; display: flex; gap: 10px;">
                            <button type="submit" class="btn btn-success btn-sm" style="padding: 6px 20px;">ë“±ë¡</button>
                            <button type="button" onclick="hideReplyForm({{ review.id }})"
                                class="btn btn-secondary btn-sm" style="padding: 6px 20px;">ì·¨ì†Œ</button>
                        </div>
                    </form>
                </div>
            </div>

            <!-- í•´ë‹¹ í›„ê¸°ì˜ ëŒ€ëŒ“ê¸€ë“¤ -->
            {% for reply in reviews %}
            {% if reply.parent_comment_id == review.id %}
            <div
                style="padding: 10px; padding-top: 0; padding-left: 60px; background: var(--card-bg); {% if reply.is_deleted %}opacity: 0.6;{% endif %}; position: relative;">
                <div
                    style="position: absolute; left: 60px; right: 0; bottom: -6px; height: 1px; background: var(--border-color);">
                </div>
                <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 10px;">
                    <div style="display: flex; align-items: center; gap: 6px;">
                        <span style="color: var(--text-secondary); font-size: 1.2rem; margin-right: 4px;">ã„´</span>
                        {% if reply.is_deleted and session.get('user_role') == 'admin' %}
                        <span
                            style="background: #ef4444; color: white; padding: 2px 8px; border-radius: 4px; font-size: 0.7rem; margin-right: 4px;">ì‚­ì œë¨</span>
                        {% endif %}
                        <strong style="color: var(--text-primary);">{{ reply.author }}</strong>
                        <span style="color: var(--text-muted); font-size: 0.85em;">{{ reply.ip_display }}</span>
                    </div>
                    <div style="display: flex; align-items: center; gap: 10px;">
                        <span style="color: var(--text-secondary); font-size: 0.85rem;">
                            {{ reply.created_at.strftime('%m-%d %H:%M') }}
                        </span>
                        {% if not reply.is_deleted %}
                        <button onclick="deleteReview({{ reply.id }})" class="btn btn-sm btn-outline-danger"
                            style="padding: 2px 10px; font-size: 0.8rem;">
                            ì‚­ì œ
                        </button>
                        {% if session.get('user_role') == 'admin' %}
                        <button onclick="adminDeleteReview({{ reply.id }})" class="btn btn-sm btn-danger"
                            style="padding: 2px 10px; font-size: 0.8rem;">
                            ğŸ”§ ê´€ë¦¬ìì‚­ì œ
                        </button>
                        {% endif %}
                        {% endif %}
                    </div>
                </div>
                <div style="color: var(--text-primary); line-height: 1.6;">
                    {{ reply.content }}
                </div>
            </div>
            {% endif %}
            {% endfor %}
            {% endif %}
            {% endfor %}
        </div>
        {% else %}
        <div style="text-align: center; padding: 60px 20px; color: var(--text-secondary);">
            <div style="font-size: 3rem; margin-bottom: 10px;">ğŸ’­</div>
            <p>ì•„ì§ ì‘ì„±ëœ í›„ê¸°ê°€ ì—†ìŠµë‹ˆë‹¤</p>
            <p style="font-size: 0.9rem;">ì²« ë²ˆì§¸ í›„ê¸°ë¥¼ ì‘ì„±í•´ë³´ì„¸ìš”!</p>
        </div>
        {% endif %}
    </div>

</div>

<script>
    function toggleWriteForm() {
        const form = document.getElementById('writeForm');
        const btn = document.getElementById('toggleWriteBtn');

        if (form.style.display === 'none') {
            form.style.display = 'block';
            btn.textContent = 'âŒ ë‹«ê¸°';
            // í¼ìœ¼ë¡œ ìŠ¤í¬ë¡¤
            form.scrollIntoView({ behavior: 'smooth', block: 'start' });
        } else {
            form.style.display = 'none';
            btn.textContent = 'âœï¸ ë¦¬ë·° ì‘ì„±';
        }
    }

    // ëŒ€ëŒ“ê¸€ í¼ í‘œì‹œ
    function showReplyForm(reviewId) {
        document.querySelectorAll('[id^="replyForm-"]').forEach(form => {
            form.style.display = 'none';
        });
        document.getElementById('replyForm-' + reviewId).style.display = 'block';
    }

    // ëŒ€ëŒ“ê¸€ í¼ ìˆ¨ê¸°ê¸°
    function hideReplyForm(reviewId) {
        document.getElementById('replyForm-' + reviewId).style.display = 'none';
    }

    // ì„ ìˆ˜ í›„ê¸° íˆ¬í‘œ í•¨ìˆ˜
    function voteReview(reviewId, voteType) {
        fetch(`/player_review/vote/${reviewId}/${voteType}`, {
            method: 'POST',
            headers: {
                'Content-Type': 'application/json',
            }
        })
            .then(response => {
                // ì‘ë‹µ ìƒíƒœ í™•ì¸
                if (!response.ok) {
                    throw new Error(`HTTP error! status: ${response.status}`);
                }
                return response.json();
            })
            .then(data => {
                if (data.success) {
                    // ìˆ«ì ì—…ë°ì´íŠ¸
                    document.getElementById(`likes-${reviewId}`).textContent = data.likes;
                    document.getElementById(`dislikes-${reviewId}`).textContent = data.dislikes;

                    // ì„±ê³µ ì•Œë¦¼
                    alert(voteType === 'like' ? 'ğŸ‘ ì¶”ì²œí–ˆìŠµë‹ˆë‹¤!' : 'ğŸ‘ ë¹„ì¶”ì²œí–ˆìŠµë‹ˆë‹¤!');
                } else {
                    alert(data.message);
                }
            })
            .catch(error => {
                console.error('Error:', error);
                alert('íˆ¬í‘œ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤');
            });
    }

    function deleteReview(reviewId) {
        // ë¡œê·¸ì¸ ì—¬ë¶€ í™•ì¸
        const isLoggedIn = {{ 'true' if session.get('user_id') else 'false'
    }};

    let password = '';
    if (!isLoggedIn) {
        password = prompt('ë¹„ë°€ë²ˆí˜¸ë¥¼ ì…ë ¥í•˜ì„¸ìš”:');
        if (!password) return;
    } else {
        if (!confirm('ì •ë§ë¡œ ì‚­ì œí•˜ì‹œê² ìŠµë‹ˆê¹Œ?')) return;
    }

    fetch(`/player_review/${reviewId}/delete`, {
        method: 'POST',
        headers: { 'Content-Type': 'application/x-www-form-urlencoded' },
        body: `password=${encodeURIComponent(password)}`
    })
        .then(response => response.json())
        .then(data => {
            if (data.success) {
                alert(data.message);
                location.reload();
            } else {
                alert(data.message);
            }
        })
        .catch(error => {
            alert('ì‚­ì œ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤');
            console.error(error);
        });
    }

    // ê´€ë¦¬ì ì „ìš© ì„ ìˆ˜ í›„ê¸° ì‚­ì œ
    function adminDeleteReview(reviewId) {
        if (!confirm('ì •ë§ë¡œ ì´ í›„ê¸°ë¥¼ ì‚­ì œí•˜ì‹œê² ìŠµë‹ˆê¹Œ?\nì‚­ì œëœ í›„ê¸°ëŠ” ê´€ë¦¬ìë§Œ ë³¼ ìˆ˜ ìˆìŠµë‹ˆë‹¤.')) {
            return;
        }

        fetch(`/player_review/${reviewId}/admin_delete`, {
            method: 'POST',
            headers: {
                'Content-Type': 'application/json',
            }
        })
            .then(response => response.json())
            .then(data => {
                if (data.success) {
                    alert('í›„ê¸°ê°€ ì‚­ì œë˜ì—ˆìŠµë‹ˆë‹¤');
                    location.reload();
                } else {
                    alert(data.message || 'ì‚­ì œ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤');
                }
            })
            .catch(error => {
                console.error('Error:', error);
                alert('ì‚­ì œ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤');
            });
    }
</script>

<style>
    /* ë‹¤í¬ëª¨ë“œ ì…€ë ‰íŠ¸ ì˜µì…˜ */
    [data-theme="dark"] .form-select option {
        background: #2d3748;
        color: #ffffff;
    }

    /* ë²„íŠ¼ í˜¸ë²„ íš¨ê³¼ */
    #toggleWriteBtn:hover {
        background: #059669 !important;
        transform: translateY(-2px);
    }

    /* íˆ¬í‘œ ë²„íŠ¼ í˜¸ë²„ íš¨ê³¼ */
    .vote-btn:hover {
        transform: translateY(-2px);
        box-shadow: 0 2px 8px var(--shadow-main);
    }

    .like-btn:hover {
        border-color: #10b981;
        background: rgba(16, 185, 129, 0.1);
        color: #10b981;
    }

    .dislike-btn:hover {
        border-color: #ef4444;
        background: rgba(239, 68, 68, 0.1);
        color: #ef4444;
    }

    .vote-btn:active {
        transform: translateY(0);
    }

    /* ëª¨ë°”ì¼ ëŒ€ì‘ */
    @media (max-width: 768px) {

        /* ì»¨í…Œì´ë„ˆ ì—¬ë°± ì¤„ì´ê¸° */
        .container[style*="max-width: 1200px"] {
            margin: 20px auto !important;
            padding: 0 12px !important;
        }

        /* ìƒë‹¨ í—¤ë” íŒ¨ë”© ì¤„ì´ê¸° */
        div[style*="padding: 20px 30px"][style*="margin-bottom: 30px"] {
            padding: 12px 15px !important;
            margin-bottom: 20px !important;
        }

        /* ìƒë‹¨ í—¤ë” ì–‘ìª½ ì •ë ¬ */
        div[style*="padding: 20px 30px"]>div[style*="justify-content: space-between"] {
            gap: 10px !important;
        }

        /* ë’¤ë¡œê°€ê¸° ë²„íŠ¼ */
        .back-btn {
            padding: 10px 20px !important;
            font-size: 0.9rem !important;
        }

        /* ì¤‘ì•™ ì‹œì¦Œ+ì„ ìˆ˜ëª… ì˜ì—­ ìˆ¨ê¸°ê¸° */
        div[style*="flex: 1"][style*="justify-content: center"] {
            display: none !important;
        }

        /* ë¦¬ë·° ì‘ì„± ë²„íŠ¼ */
        #toggleWriteBtn {
            padding: 10px 20px !important;
            font-size: 0.9rem !important;
        }

        /* í›„ê¸° ì‘ì„± í¼ íŒ¨ë”© ì¤„ì´ê¸° */
        #writeForm[style*="padding: 30px"] {
            padding: 20px 15px !important;
            margin-bottom: 20px !important;
        }

        /* í›„ê¸° ì‘ì„± ì œëª© í¬ê¸° ì¤„ì´ê¸° */
        #writeForm h4 {
            font-size: 1.1rem !important;
        }

        /* ë‹«ê¸° ë²„íŠ¼ ì‘ê²Œ */
        #writeForm button[onclick="toggleWriteForm()"] {
            padding: 4px 10px !important;
            font-size: 0.8rem !important;
        }

        /* label í¬ê¸° ì¤„ì´ê¸° */
        #writeForm label {
            font-size: 0.9rem !important;
            margin-bottom: 6px !important;
        }

        /* ì…ë ¥ í•„ë“œ í¬ê¸° ì¡°ì • */
        #writeForm .form-control,
        #writeForm .form-select {
            padding: 10px !important;
            font-size: 0.9rem !important;
        }

        /* textarea í¬ê¸° ì¡°ì • */
        #writeForm textarea {
            padding: 10px !important;
            font-size: 0.9rem !important;
        }

        /* ì‘ì„± ì™„ë£Œ ë²„íŠ¼ */
        #writeForm .btn-success {
            padding: 10px 24px !important;
            font-size: 0.9rem !important;
        }

        /* í¼ ë‚´ ì—¬ë°± ì¤„ì´ê¸° */
        #writeForm div[style*="margin-bottom: 15px"] {
            margin-bottom: 12px !important;
        }

        #writeForm div[style*="margin-bottom: 20px"] {
            margin-bottom: 15px !important;
        }

        /* í›„ê¸° ëª©ë¡ íŒ¨ë”© ì¤„ì´ê¸° */
        div[style*="padding: 30px"][style*="margin-bottom: 30px"]:not(#writeForm) {
            padding: 20px 15px !important;
        }

        /* í›„ê¸° ì œëª© í¬ê¸° */
        div[style*="padding: 30px"] h3 {
            font-size: 1.2rem !important;
            margin-bottom: 15px !important;
        }

        /* í›„ê¸° ì¹´ë“œ íŒ¨ë”© ì¤„ì´ê¸° */
        div[style*="padding: 20px"][style*="border-left: 3px solid"] {
            padding: 15px !important;
        }

        /* í›„ê¸° í—¤ë” ì˜ì—­ ì„¸ë¡œ ë°°ì¹˜ */
        div[style*="padding: 20px"][style*="border-left: 3px solid"]>div[style*="justify-content: space-between"]:first-child {
            flex-direction: column !important;
            align-items: flex-start !important;
            gap: 8px !important;
        }

        /* ì‘ì„±ì ì •ë³´ ì˜ì—­ */
        div[style*="padding: 20px"][style*="border-left: 3px solid"]>div>div[style*="gap: 15px"]:first-child {
            flex-wrap: wrap !important;
            gap: 8px !important;
        }

        /* ì‘ì„±ì ì´ë¦„ í¬ê¸° */
        div[style*="padding: 20px"][style*="border-left: 3px solid"] span[style*="font-weight: 600"] {
            font-size: 0.9rem !important;
        }

        /* IP, í‰ì  í¬ê¸° */
        div[style*="padding: 20px"][style*="border-left: 3px solid"] span[style*="font-size: 0.85em"],
        div[style*="padding: 20px"][style*="border-left: 3px solid"] span[style*="color: #fbbf24"] {
            font-size: 0.8rem !important;
        }

        /* ë‚ ì§œ ë° ë²„íŠ¼ ì˜ì—­ */
        div[style*="padding: 20px"][style*="border-left: 3px solid"]>div>div[style*="gap: 10px"]:last-child {
            width: 100% !important;
            display: flex !important;
            flex-wrap: wrap !important;
            gap: 6px !important;
        }

        /* ë‚ ì§œëŠ” ì™¼ìª½, ë²„íŠ¼ë“¤ì€ ì˜¤ë¥¸ìª½ */
        div[style*="padding: 20px"][style*="border-left: 3px solid"]>div>div[style*="gap: 10px"]:last-child>span {
            margin-right: auto !important;
        }

        /* ë‚ ì§œ í¬ê¸° ë” ì¤„ì´ê¸° */
        div[style*="padding: 20px"][style*="border-left: 3px solid"]>div>div[style*="gap: 10px"]:last-child>span[style*="font-size: 0.9rem"] {
            font-size: 0.75rem !important;
        }

        /* ë²„íŠ¼ í¬ê¸° ì¤„ì´ê¸° */
        div[style*="padding: 20px"][style*="border-left: 3px solid"] .btn-sm {
            padding: 2px 8px !important;
            font-size: 0.75rem !important;
        }

        /* í›„ê¸° ë‚´ìš© í¬ê¸° */
        div[style*="padding: 20px"][style*="border-left: 3px solid"] p {
            font-size: 0.9rem !important;
            line-height: 1.5 !important;
            margin-bottom: 12px !important;
        }

        /* ì¶”ì²œ/ë¹„ì¶”ì²œ ë²„íŠ¼ */
        .vote-btn {
            padding: 2px 8px !important;
            font-size: 0.75rem !important;
            gap: 2px !important;
        }

        .vote-btn span:first-child {
            font-size: 0.85rem !important;
        }

        /* ì¶”ì²œ/ë¹„ì¶”ì²œ ë²„íŠ¼ ê°„ ê°„ê²© ì¤„ì´ê¸° */
        div[style*="justify-content: flex-end"][style*="gap: 10px"] {
            gap: 5px !important;
        }

        /* ëŒ€ëŒ“ê¸€ ì™¼ìª½ ë“¤ì—¬ì“°ê¸° ë” ì¤„ì´ê¸° */
        div[style*="padding-left: 60px"] {
            padding-left: 25px !important;
            padding-right: 12px !important;
            padding-top: 12px !important;
            padding-bottom: 12px !important;
        }

        /* ëŒ€ëŒ“ê¸€ êµ¬ë¶„ì„  ìœ„ì¹˜ ì¡°ì • */
        div[style*="padding-left: 60px"]>div[style*="position: absolute"][style*="left: 60px"] {
            left: 25px !important;
        }

        /* ëŒ€ëŒ“ê¸€ í™”ì‚´í‘œ í¬ê¸° */
        div[style*="padding-left: 60px"] span[style*="font-size: 1.2rem"] {
            font-size: 0.9rem !important;
            margin-right: 2px !important;
        }

        /* ëŒ€ëŒ“ê¸€ ì‘ì„±ì ì •ë³´ ì˜ì—­ */
        div[style*="padding-left: 60px"]>div[style*="justify-content: space-between"] {
            flex-direction: column !important;
            align-items: flex-start !important;
            gap: 8px !important;
            margin-bottom: 8px !important;
        }

        /* ëŒ€ëŒ“ê¸€ ì‘ì„±ì ì˜ì—­ */
        div[style*="padding-left: 60px"]>div>div[style*="gap: 6px"]:first-child {
            flex-wrap: wrap !important;
            gap: 6px !important;
        }

        /* ëŒ€ëŒ“ê¸€ ì‘ì„±ì ì´ë¦„ */
        div[style*="padding-left: 60px"] strong {
            font-size: 0.9rem !important;
        }

        /* ëŒ€ëŒ“ê¸€ IP */
        div[style*="padding-left: 60px"] span[style*="font-size: 0.85em"] {
            font-size: 0.8rem !important;
        }

        /* ëŒ€ëŒ“ê¸€ ë‚ ì§œ ë° ë²„íŠ¼ ì˜ì—­ */
        div[style*="padding-left: 60px"]>div>div[style*="gap: 10px"]:last-child {
            width: 100% !important;
            display: flex !important;
            gap: 6px !important;
        }

        /* ëŒ€ëŒ“ê¸€ ë‚ ì§œ */
        div[style*="padding-left: 60px"]>div>div[style*="gap: 10px"]>span[style*="font-size: 0.85rem"] {
            font-size: 0.75rem !important;
            margin-right: auto !important;
        }

        /* ëŒ€ëŒ“ê¸€ ë²„íŠ¼ */
        div[style*="padding-left: 60px"] .btn-sm {
            padding: 2px 8px !important;
            font-size: 0.75rem !important;
        }

        /* ëŒ€ëŒ“ê¸€ ë‚´ìš© */
        div[style*="padding-left: 60px"]>div[style*="line-height: 1.6"] {
            font-size: 0.9rem !important;
            line-height: 1.5 !important;
        }
    }
</style>

{% endblock %}