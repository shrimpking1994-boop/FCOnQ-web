{% extends "index.html" %}

{% block content %}
<style>
    .back-btn {
        background: var(--bg-main);
        color: var(--primary-color);
        padding: 10px 20px;
        border-radius: 20px;
        text-decoration: none;
        display: inline-block;
        margin-bottom: 20px;
        transition: all 0.3s;
        border: 2px solid var(--primary-color);
        font-weight: 600;
    }

    .back-btn:hover {
        background: var(--primary-color);
        color: var(--bg-main);
        transform: translateX(-5px);
        box-shadow: 0 4px 15px var(--shadow-hover);
    }

    .header-section {
        display: grid;
        grid-template-columns: 1fr auto 1fr;
        gap: 30px;
        margin-bottom: 30px;
        align-items: center;
    }

    .vs-divider {
        font-size: 48px;
        font-weight: bold;
        color: var(--primary-color);
        text-align: center;
    }

    .player-header {
        text-align: center;
    }

    .player-image {
        width: 150px;
        height: 150px;
        object-fit: contain;
        border-radius: 15px;
        background: var(--bg-secondary);
        padding: 10px;
        margin-bottom: 15px;
    }

    .player-name-row {
        display: flex;
        align-items: center;
        justify-content: center;
        gap: 10px;
        margin-bottom: 10px;
    }

    .season-icon {
        width: 35px;
        height: 35px;
        object-fit: contain;
    }

    .player-name {
        font-size: 22px;
        font-weight: 700;
        color: var(--text-primary);
        margin: 0;
    }

    .salary-badge {
        display: inline-flex;
        align-items: center;
        justify-content: center;
        width: 22px;
        height: 25px;
        background: var(--text-secondary);
        color: var(--bg-main);
        clip-path: polygon(50% 0%, 100% 30%, 100% 70%, 50% 100%, 0% 70%, 0% 30%);
        font-weight: bold;
        font-size: 12px;
    }

    .comparison-table {
        width: 100%;
        border-collapse: collapse;
    }

    .comparison-row {
        display: grid;
        grid-template-columns: 1fr auto 1fr;
        gap: 20px;
        padding: 12px 0;
        border-bottom: 1px solid var(--border-color);
        align-items: center;
    }

    .comparison-row:last-child {
        border-bottom: none;
    }

    .comparison-row.header-row {
        border-bottom: none;
    }

    .left-value {
        text-align: right;
        color: var(--text-primary);
        font-size: 15px;
        padding-right: 20px;
    }

    .center-label {
        text-align: center;
        color: var(--text-secondary);
        font-weight: 600;
        font-size: 14px;
        width: 120px;
        min-width: 120px;
        max-width: 120px;
        padding: 8px 10px;
        background: var(--bg-secondary);
        border-radius: 8px;
    }

    .right-value {
        text-align: left;
        color: var(--text-primary);
        font-size: 15px;
        padding-left: 20px;
    }

    .nation-content {
        display: flex;
        align-items: center;
        gap: 8px;
    }

    .nation-content.left {
        justify-content: flex-end;
    }

    .nation-content.right {
        justify-content: flex-start;
    }

    .nation-flag {
        width: 24px;
        height: 18px;
        object-fit: contain;
    }

    .traits-content {
        display: flex;
        flex-wrap: wrap;
        gap: 4px;
    }

    .traits-content.left {
        justify-content: flex-end;
    }

    .traits-content.right {
        justify-content: flex-start;
    }

    .trait-icon {
        width: 28px;
        height: 28px;
        object-fit: contain;
    }

    .price-comparison-container {
        max-height: 200px;
        overflow-y: overlay;
        background: var(--bg-secondary);
        border-radius: 10px;
        padding: 10px 20px;
        margin-bottom: 20px;
    }

    .price-comparison-container::-webkit-scrollbar {
        width: 8px;
    }

    .price-comparison-container::-webkit-scrollbar-track {
        background: transparent;
    }

    .price-comparison-container::-webkit-scrollbar-thumb {
        background: rgba(255, 255, 255, 0.15);
        border-radius: 4px;
    }

    .price-comparison-container::-webkit-scrollbar-thumb:hover {
        background: rgba(255, 255, 255, 0.25);
    }

    .price-comparison-row {
        display: grid;
        grid-template-columns: 1fr 50px 1fr;
        gap: 20px;
        align-items: center;
        padding: 10px 0;
        padding-left: 8px;
    }

    .price-left {
        text-align: right;
        padding-right: 20px;
    }

    .price-center {
        display: flex;
        justify-content: center;
        align-items: center;
    }

    .price-right {
        text-align: left;
        padding-left: 20px;
    }

    .price-display {
        font-size: 13px;
        color: var(--text-primary);
        font-weight: 500;
    }

    .enhance-badge {
        display: inline-flex;
        align-items: center;
        justify-content: center;
        width: 50px;
        height: 28px;
        border-radius: 6px;
        font-weight: bold;
        font-size: 14px;
    }

    .enhance-level-1 {
        background: #808080;
        color: white;
    }

    .enhance-level-2-4 {
        background: #CD7F32;
        color: #333;
    }

    .enhance-level-5-7 {
        background: #C0C0C0;
        color: #333;
    }

    .enhance-level-8-10 {
        background: #FFD700;
        color: #333;
    }

    .enhance-level-11-13 {
        background: #DDA0DD;
        color: white;
    }

    .simulators-wrapper {
        display: grid;
        grid-template-columns: 1fr auto 1fr;
        gap: 20px;
        align-items: start;
        padding: 15px 20px;
        background: var(--bg-secondary);
        border-radius: 10px;
        margin-bottom: 20px;
    }

    .simulator-section {
        display: contents;
    }

    .simulator-controls-left {
        display: flex;
        gap: 10px;
        justify-content: flex-end;
    }

    .simulator-controls-right {
        display: flex;
        gap: 10px;
        justify-content: flex-start;
    }

    .simulator-divider {
        width: 100px;
    }

    .simulator-wrapper {
        position: relative;
        min-width: 120px;
    }

    .simulator-select {
        width: 100%;
        background: var(--bg-main);
        color: var(--text-primary);
        border: 1px solid var(--border-color);
        appearance: none;
        padding: 8px 30px 8px 12px;
        cursor: pointer;
        border-radius: 6px;
        font-size: 14px;
    }

    .simulator-select:focus {
        outline: none;
        border-color: var(--primary-color);
        box-shadow: 0 0 0 0.2rem var(--shadow-focus);
    }

    .select-arrow {
        position: absolute;
        right: 10px;
        top: 50%;
        transform: translateY(-50%);
        pointer-events: none;
        color: var(--text-muted);
        font-size: 10px;
    }

    .stats-comparison-container {
        background: var(--bg-secondary);
        border-radius: 10px;
        padding: 10px 20px;
        display: grid;
        grid-template-columns: 260px 1fr 260px;
        gap: 20px;
        align-items: start;
    }

    .preferred-positions-left {
        display: flex;
        flex-direction: column;
        gap: 15px;
        padding-top: 20px;
        padding-left: 85px;
    }

    .preferred-positions-right {
        display: flex;
        flex-direction: column;
        gap: 15px;
        padding-top: 20px;
        padding-right: 85px;
    }

    .stat-comparison-row {
        display: grid;
        grid-template-columns: 1fr auto 1fr;
        gap: 20px;
        align-items: center;
        padding: 8px 0;
    }

    .stat-left {
        text-align: right;
        padding-right: 20px;
    }

    .stat-center {
        text-align: center;
        width: 130px;
        min-width: 130px;
        max-width: 130px;
        padding: 6px 10px;
        background: var(--bg-main);
        border-radius: 6px;
    }

    .stat-label {
        font-size: 13px;
        color: var(--text-secondary);
        font-weight: 600;
    }

    .stat-right {
        text-align: left;
        padding-left: 20px;
    }

    .stat-value {
        font-size: 17px;
        font-weight: bold;
        display: inline-block;
        min-width: 35px;
    }

    .stat-left .stat-value {
        text-align: right;
    }

    .stat-right .stat-value {
        text-align: left;
    }

    .stat-diff {
        color: #28a745;
        font-weight: bold;
        font-size: 13px;
        margin-left: 8px;
    }

    .stat-diff.left {
        margin-left: 0;
        margin-right: 8px;
    }

    .preferred-positions-box {
        display: flex;
        flex-direction: column;
        gap: 8px;
        padding: 15px;
        background: var(--bg-main);
        border-radius: 10px;
        min-height: 100px;
    }

    .preferred-pos-item {
        display: flex;
        align-items: center;
        gap: 10px;
        font-size: 18px;
        font-weight: bold;
    }

    .preferred-pos-item .position {
        min-width: 50px;
    }

    .preferred-pos-item .overall {
        color: var(--text-primary);
    }

    /* ëª¨ë°”ì¼ ìµœì í™” */
    @media (max-width: 768px) {

        /* ë’¤ë¡œê°€ê¸° ë²„íŠ¼ */
        .back-btn {
            padding: 6px 12px !important;
            font-size: 0.8rem;
            margin-bottom: 0px;
        }

        /* í—¤ë” ì„¹ì…˜ */
        .header-section {
            grid-template-columns: 1fr auto 1fr;
            gap: 15px;
            margin-bottom: 0px;
        }

        /* VS í…ìŠ¤íŠ¸ */
        .vs-divider {
            font-size: 32px;
        }

        /* í”Œë ˆì´ì–´ ì´ë¯¸ì§€ */
        .player-image {
            width: 100px;
            height: 100px;
            padding: 8px;
            margin-bottom: 10px;
        }

        /* ì‹œì¦Œ ì•„ì´ì½˜ */
        .season-icon {
            width: 26px;
            height: 26px;
        }

        /* í”Œë ˆì´ì–´ ì´ë¦„ */
        .player-name {
            font-size: 1rem;
        }

        /* ê¸‰ì—¬ ë°°ì§€ */
        .salary-badge {
            width: 18px;
            height: 20px;
            font-size: 10px;
        }

        /* ë¹„êµ í–‰ */
        .comparison-row {
            grid-template-columns: 1fr auto 1fr;
            gap: 10px;
            padding: 10px 0;
        }

        /* ì¢Œìš° ê°’ */
        .left-value,
        .right-value {
            font-size: 0.85rem;
            padding-left: 10px;
            padding-right: 10px;
        }

        /* ì¤‘ì•™ ë¼ë²¨ */
        .center-label {
            font-size: 0.75rem;
            width: 80px;
            min-width: 80px;
            max-width: 80px;
            padding: 6px 8px;
        }

        /* êµ­ê¸° */
        .nation-flag {
            width: 20px;
            height: 15px;
        }

        /* íŠ¹ì„± ì•„ì´ì½˜ */
        .trait-icon {
            width: 24px;
            height: 24px;
        }

        .price-comparison-container {
            max-height: 180px;
            padding: 10px 15px;
            margin-bottom: 15px;
            margin-left: 8px;
        }

        .price-comparison-row {
            grid-template-columns: 1fr 45px 1fr;
            gap: 10px;
            padding: 8px 0;
            padding-left: 0;
        }

        .price-left,
        .price-right {
            padding-left: 5px;
            padding-right: 5px;
            font-size: 0.75rem;
        }

        /* ê°€ê²© í‘œì‹œ - ê´„í˜¸ ë¶€ë¶„ë§Œ ë³´ì´ê²Œ */
        .price-display {
            font-size: 0.75rem;
            display: block;
            position: relative;
            height: 1.2em;
            overflow: hidden;
            line-height: 1.2em;
        }

        /* ì™¼ìª½: ì˜¤ë¥¸ìª½ ì •ë ¬ */
        .price-left {
            display: flex;
            justify-content: flex-end;
        }

        .price-left .price-display {
            text-align: right;
            font-size: 0.75rem;
        }

        /* ì˜¤ë¥¸ìª½: ì™¼ìª½ ì •ë ¬ */
        .price-right {
            display: flex;
            justify-content: flex-start;
        }

        .price-right .price-display {
            text-align: left;
            font-size: 0.75rem;
        }

        /* ê°•í™” ë°°ì§€ */
        .enhance-badge {
            width: 45px;
            height: 26px;
            font-size: 0.8rem;
        }

        /* ì„¸ë¶€ ìŠ¤íƒ¯ ë²„íŠ¼ */
        .detail-stats-btn {
            padding: 10px 18px;
            font-size: 0.9rem;
        }

        /* ì„¸ë¶€ ìŠ¤íƒ¯ ë“œë¡­ë‹¤ìš´ */
        .detail-stats-dropdown select {
            padding: 8px 12px;
            font-size: 0.85rem;
        }

        /* í¬ì§€ì…˜ í‘œì‹œ */
        .position-display {
            gap: 8px;
        }

        .position-box {
            padding: 8px 12px;
        }

        .position-label {
            font-size: 0.9rem;
        }

        .position-overall {
            font-size: 1.8rem;
        }

        .position-name {
            font-size: 0.75rem;
        }

        /* ìŠ¤íƒ¯ í…Œì´ë¸” */
        .stats-row {
            grid-template-columns: 1fr auto 1fr;
            gap: 10px;
            padding: 8px 0;
        }

        .stat-label {
            font-size: 0.75rem;
            width: 70px;
            min-width: 70px;
            padding: 6px 8px;
        }

        .stat-value {
            font-size: 0.85rem;
        }

        /* ì‹œë®¬ë ˆì´í„° ì»¨íŠ¸ë¡¤ - ì¢Œìš° 2ì—´ ë°°ì¹˜ */
        .simulators-wrapper {
            grid-template-columns: 1fr 1fr;
            gap: 10px;
            padding: 15px;
        }

        .simulator-divider {
            display: none;
        }

        .simulator-section {
            display: flex;
        }

        .simulator-controls-left,
        .simulator-controls-right {
            flex-direction: column;
            gap: 10px;
            width: 100%;
        }

        /* ì˜¤ë¥¸ìª½ë§Œ ìˆœì„œ ì—­ì „ (ê°•í™” â†’ ì ì‘ë„ â†’ íŒ€ì»¬ëŸ¬) */
        .simulator-controls-right {
            flex-direction: column-reverse;
        }

        .simulator-wrapper {
            width: 100%;
            min-width: auto;
        }

        .simulator-select {
            width: 100%;
            padding: 10px 30px 10px 12px;
            font-size: 0.85rem;
        }

        .stats-comparison-container {
            padding: 10px;
            grid-template-columns: 1fr 1fr;
            gap: 10px;
            grid-template-areas:
                "pos-left pos-right"
                "stats stats";
        }

        .preferred-positions-left {
            grid-area: pos-left;
        }

        .preferred-positions-right {
            grid-area: pos-right;
        }

        .stats-comparison-container>div:nth-child(2) {
            grid-area: stats;
            grid-column: 1 / -1;
        }

        /* ì„ í˜¸ í¬ì§€ì…˜ ëª¨ë°”ì¼ ìµœì í™” */
        .preferred-positions-left,
        .preferred-positions-right {
            padding: 10px 5px;
            gap: 8px;
        }

        .preferred-positions-left>div,
        .preferred-positions-right>div {
            display: flex;
            align-items: center;
            gap: 8px;
            padding: 8px 10px;
            background: rgba(255, 255, 255, 0.05);
            border-radius: 8px;
        }

        /* ì™¼ìª½: ì˜¤ë¥¸ìª½ ì •ë ¬ (119 CM) */
        .preferred-positions-left>div {
            flex-direction: row-reverse;
            justify-content: flex-start;
        }

        /* ì˜¤ë¥¸ìª½: ì™¼ìª½ ì •ë ¬ (CM 119) */
        .preferred-positions-right>div {
            justify-content: flex-start;
        }

        /* í¬ì§€ì…˜ëª… ì‘ê²Œ */
        .preferred-positions-left>div>div:first-child,
        .preferred-positions-right>div>div:first-child {
            font-size: 14px !important;
            font-weight: bold;
            margin-bottom: 0 !important;
            min-width: 35px;
        }

        /* ì˜¤ë²„ë¡¤ ìˆ«ì ì‘ê²Œ */
        .preferred-positions-left .preferred-pos-value,
        .preferred-positions-right .preferred-pos-value {
            font-size: 24px !important;
            line-height: 1 !important;
        }

        /* ì„¸ë¶€ ìŠ¤íƒ¯ ë” ì‘ê²Œ */
        .stat-comparison-row {
            gap: 12px;
            padding: 5px 0;
        }

        .stat-left,
        .stat-right {
            display: flex;
            align-items: center;
            gap: 1px;
            padding: 0;
            min-width: 50px;
        }

        /* ì™¼ìª½: ì°¨ì´ê°’ ì˜¤ë¥¸ìª½ ì •ë ¬ */
        .stat-left {
            justify-content: flex-end;
            padding-right: 8px;
        }

        /* ì˜¤ë¥¸ìª½: ì°¨ì´ê°’ ì™¼ìª½ ì •ë ¬ */
        .stat-right {
            justify-content: flex-start;
            padding-left: 8px;
        }

        .stat-center {
            min-width: 100px;
            max-width: 100px;
        }

        .stat-label {
            font-size: 0.72rem;
            padding: 5px 8px;
            min-width: 100px;
            max-width: 100px;
            white-space: nowrap;
        }

        .stat-value {
            font-size: 0.75rem;
        }

        .stat-diff {
            font-size: 0.62rem;
            white-space: nowrap;
        }

        /* ì„ í˜¸ í¬ì§€ì…˜ ë” ì‘ê²Œ */
        .preferred-positions-left>div,
        .preferred-positions-right>div {
            padding: 6px 8px;
            gap: 6px;
        }

        .preferred-positions-left>div>div:first-child,
        .preferred-positions-right>div>div:first-child {
            font-size: 12px !important;
            min-width: 30px;
        }

        .preferred-positions-left .preferred-pos-value,
        .preferred-positions-right .preferred-pos-value {
            font-size: 20px !important;
        }
    }

    /* ì‘ì€ ëª¨ë°”ì¼ (480px ì´í•˜) */
    @media (max-width: 480px) {

        /* í—¤ë” ê°„ê²© ì¶•ì†Œ */
        .header-section {
            gap: 10px;
        }

        /* VS í…ìŠ¤íŠ¸ */
        .vs-divider {
            font-size: 28px;
        }

        /* í”Œë ˆì´ì–´ ì´ë¯¸ì§€ ë” ì‘ê²Œ */
        .player-image {
            width: 85px;
            height: 85px;
            padding: 6px;
        }

        /* í”Œë ˆì´ì–´ ì´ë¦„ */
        .player-name {
            font-size: 0.9rem;
        }

        /* ì‹œì¦Œ ì•„ì´ì½˜ */
        .season-icon {
            width: 22px;
            height: 22px;
        }

        /* ë¹„êµ í–‰ ê°„ê²© */
        .comparison-row {
            gap: 8px;
            padding: 8px 0;
        }

        /* ì¤‘ì•™ ë¼ë²¨ ë” ì‘ê²Œ */
        .center-label {
            font-size: 0.7rem;
            width: 70px;
            min-width: 70px;
            max-width: 70px;
            padding: 5px 6px;
        }

        /* ì¢Œìš° ê°’ */
        .left-value,
        .right-value {
            font-size: 0.8rem;
            padding-left: 8px;
            padding-right: 8px;
        }

        /* ê°€ê²© ë¹„êµ */
        .price-comparison-row {
            grid-template-columns: 1fr 40px 1fr;
            gap: 8px;
        }

        .enhance-badge {
            width: 40px;
            height: 24px;
            font-size: 0.75rem;
        }

        .price-display {
            font-size: 0.7rem;
        }
    }
</style>

<div style="margin-bottom: 20px;">
    <a href="javascript:history.back()" class="back-btn"
        style="display: inline-block; padding: 10px 20px; border: 2px solid #667eea; border-radius: 8px; color: var(--text-primary); text-decoration: none; transition: all 0.3s; white-space: nowrap;">
        â† ë’¤ë¡œ ê°€ê¸°
    </a>
</div>
<!-- ìƒë‹¨ í—¤ë”: ì´ë¯¸ì§€, ì´ë¦„ -->
<div class="header-section">
    <!-- ì™¼ìª½ í”Œë ˆì´ì–´ í—¤ë” -->
    <div class="player-header">
        <img src="{{ card1.image_info.mini_faceon }}" class="player-image" alt="{{ card1.player_name }}">
        <div class="player-name-row">
            {% if card1.image_info.season_img %}
            <img src="{{ card1.image_info.season_img }}" alt="{{ card1.season_name }}" class="season-icon">
            {% endif %}
            <h3 class="player-name">{{ card1.player_name }}</h3>
        </div>
    </div>

    <!-- ì¤‘ì•™ VS -->
    <div class="vs-divider">VS</div>

    <!-- ì˜¤ë¥¸ìª½ í”Œë ˆì´ì–´ í—¤ë” -->
    <div class="player-header">
        <img src="{{ card2.image_info.mini_faceon }}" class="player-image" alt="{{ card2.player_name }}">
        <div class="player-name-row">
            {% if card2.image_info.season_img %}
            <img src="{{ card2.image_info.season_img }}" alt="{{ card2.season_name }}" class="season-icon">
            {% endif %}
            <h3 class="player-name">{{ card2.player_name }}</h3>
        </div>
    </div>
</div>

<!-- ë¹„êµ í…Œì´ë¸” -->
<div class="comparison-table">
    {% set TRAIT_MAPPING = {
    "ì•„í¬ë¡œë°”í‹± í”¼ë‹ˆì…”": "https://fco.dn.nexoncdn.co.kr/live/externalAssets/common/traits/trait_icon_50.png",
    "í¬ë¡œìŠ¤ í¬ì³": "https://fco.dn.nexoncdn.co.kr/live/externalAssets/common/traits/trait_icon_51.png",
    "ë¼ì¸ ë¸Œë ˆì´ì»¤": "https://fco.dn.nexoncdn.co.kr/live/externalAssets/common/traits/trait_icon_52.png",
    "ì™€ì¼ë“œ íƒœí´ëŸ¬": "https://fco.dn.nexoncdn.co.kr/live/externalAssets/common/traits/trait_icon_53.png",
    "ì²´ì´ì„œ": "https://fco.dn.nexoncdn.co.kr/live/externalAssets/common/traits/trait_icon_54.png",
    "2ê°œì˜ ì‹¬ì¥": "https://fco.dn.nexoncdn.co.kr/live/externalAssets/common/traits/trait_icon_55.png",
    "íŒŒì´í„°": "https://fco.dn.nexoncdn.co.kr/live/externalAssets/common/traits/trait_icon_56.png",
    "GK ë¹ ë¥¸ ë°˜ì‘": "https://fco.dn.nexoncdn.co.kr/live/externalAssets/common/traits/trait_icon_57.png",
    "ì„ í˜¸ í¬ì§€ì…˜ ê³ ì§‘": "https://fco.dn.nexoncdn.co.kr/live/externalAssets/common/traits/trait_icon_00.png",
    "ì¥ê±°ë¦¬ ìŠ¤ë¡œì¸": "https://fco.dn.nexoncdn.co.kr/live/externalAssets/common/traits/trait_icon_01.png",
    "íŒŒìš¸ ìœ ë„ ì„ í˜¸": "https://fco.dn.nexoncdn.co.kr/live/externalAssets/common/traits/trait_icon_03.png",
    "ìœ ë¦¬ëª¸": "https://fco.dn.nexoncdn.co.kr/live/externalAssets/common/traits/trait_icon_04.png",
    "ê°•ì² ëª¸": "https://fco.dn.nexoncdn.co.kr/live/externalAssets/common/traits/trait_icon_05.png",
    "ì£¼ë°œ ì„ í˜¸": "https://fco.dn.nexoncdn.co.kr/live/externalAssets/common/traits/trait_icon_06.png",
    "ìŠ¬ë¼ì´ë”© íƒœí´ ì„ í˜¸": "https://fco.dn.nexoncdn.co.kr/live/externalAssets/common/traits/trait_icon_07.png",
    "ê°œì¸ í”Œë ˆì´ ì„ í˜¸": "https://fco.dn.nexoncdn.co.kr/live/externalAssets/common/traits/trait_icon_09.png",
    "íŠ¸ëŸ¬ë¸” ë©”ì´ì»¤": "https://fco.dn.nexoncdn.co.kr/live/externalAssets/common/traits/trait_icon_11.png",
    "ì–¼ë¦¬ í¬ë¡œìŠ¤ ì„ í˜¸": "https://fco.dn.nexoncdn.co.kr/live/externalAssets/common/traits/trait_icon_12.png",
    "ì˜ˆë¦¬í•œ ê°ì•„ì°¨ê¸°": "https://fco.dn.nexoncdn.co.kr/live/externalAssets/common/traits/trait_icon_13.png",
    "í™”ë ¤í•œ ê°œì¸ê¸°": "https://fco.dn.nexoncdn.co.kr/live/externalAssets/common/traits/trait_icon_14.png",
    "ê¸´ íŒ¨ìŠ¤ ì„ í˜¸": "https://fco.dn.nexoncdn.co.kr/live/externalAssets/common/traits/trait_icon_15.png",
    "ì¤‘ê±°ë¦¬ ìŠ› ì„ í˜¸": "https://fco.dn.nexoncdn.co.kr/live/externalAssets/common/traits/trait_icon_16.png",
    "ìŠ¤í”¼ë“œ ë“œë¦¬ë¸”ëŸ¬": "https://fco.dn.nexoncdn.co.kr/live/externalAssets/common/traits/trait_icon_17.png",
    "í”Œë ˆì´ ë©”ì´ì»¤": "https://fco.dn.nexoncdn.co.kr/live/externalAssets/common/traits/trait_icon_18.png",
    "GK ê³µê²© ê°€ë‹´": "https://fco.dn.nexoncdn.co.kr/live/externalAssets/common/traits/trait_icon_19.png",
    "GK ëŠ¥ìˆ™í•œ í€ì¹­": "https://fco.dn.nexoncdn.co.kr/live/externalAssets/common/traits/trait_icon_20.png",
    "GK ë©€ë¦¬ ë˜ì§€ê¸°": "https://fco.dn.nexoncdn.co.kr/live/externalAssets/common/traits/trait_icon_21.png",
    "íŒŒì›Œ í—¤ë”": "https://fco.dn.nexoncdn.co.kr/live/externalAssets/common/traits/trait_icon_22.png",
    "GK ì¹¨ì°©í•œ 1:1 ìˆ˜ë¹„": "https://fco.dn.nexoncdn.co.kr/live/externalAssets/common/traits/trait_icon_23.png",
    "ì´ˆ ì¥ê±°ë¦¬ ìŠ¤ë¡œì¸": "https://fco.dn.nexoncdn.co.kr/live/externalAssets/common/traits/trait_icon_24.png",
    "ì•„ì›ƒì‚¬ì´ë“œ ìŠˆíŒ…/í¬ë¡œìŠ¤": "https://fco.dn.nexoncdn.co.kr/live/externalAssets/common/traits/trait_icon_25.png",
    "íŒ¨ìŠ¤ë§ˆìŠ¤í„°": "https://fco.dn.nexoncdn.co.kr/live/externalAssets/common/traits/trait_icon_27.png",
    "ìŠ¹ë¶€ìš•": "https://fco.dn.nexoncdn.co.kr/live/externalAssets/common/traits/trait_icon_28.png",
    "í™”ë ¤í•œ ê±·ì–´ë‚´ê¸°": "https://fco.dn.nexoncdn.co.kr/live/externalAssets/common/traits/trait_icon_29.png",
    "ì¹©ìƒ· ì„ í˜¸": "https://fco.dn.nexoncdn.co.kr/live/externalAssets/common/traits/trait_icon_41.png",
    "í…Œí¬ë‹ˆì»¬ ë“œë¦¬ë¸”ëŸ¬": "https://fco.dn.nexoncdn.co.kr/live/externalAssets/common/traits/trait_icon_42.png",
    "ìŠ¤ìœ„í¼ í‚¤í¼": "https://fco.dn.nexoncdn.co.kr/live/externalAssets/common/traits/trait_icon_43.png",
    "GK ì†Œê·¹ì  í¬ë¡œìŠ¤ ìˆ˜ë¹„": "https://fco.dn.nexoncdn.co.kr/live/externalAssets/common/traits/trait_icon_48.png",
    "GK ì ê·¹ì  í¬ë¡œìŠ¤ ìˆ˜ë¹„": "https://fco.dn.nexoncdn.co.kr/live/externalAssets/common/traits/trait_icon_49.png",
    "ìŠ¤í”¼ë“œìŠ¤í„°": "https://fco.dn.nexoncdn.co.kr/live/externalAssets/common/traits/trait_icon_63.png",
    "íƒ€ì´íƒ„": "https://fco.dn.nexoncdn.co.kr/live/externalAssets/common/traits/trait_icon_64.png",
    "ì»¤ë§¨ë”": "https://fco.dn.nexoncdn.co.kr/live/externalAssets/common/traits/trait_icon_59.png",
    "ë¸”ë¡œì»¤": "https://fco.dn.nexoncdn.co.kr/live/externalAssets/common/traits/trait_icon_62.png",
    "GK ê³µì¤‘ë³¼ ì¥ì•…": "https://fco.dn.nexoncdn.co.kr/live/externalAssets/common/traits/trait_icon_60.png"
    } %}

    <!-- ê¸‰ì—¬ -->
    <div class="comparison-row">
        <div class="left-value">
            {% set salary1 = card1.game_info.salary|default(0)|int %}
            {% set salary2 = card2.game_info.salary|default(0)|int %}
            {% if salary1 > salary2 %}
            <span class="stat-diff left">{{ salary1 - salary2 }} â–²</span>
            {% endif %}
            <span class="salary-badge">{{ salary1 }}</span>
        </div>
        <div class="center-label">ê¸‰ì—¬</div>
        <div class="right-value">
            <span class="salary-badge">{{ salary2 }}</span>
            {% if salary2 > salary1 %}
            <span class="stat-diff">â–² {{ salary2 - salary1 }}</span>
            {% endif %}
        </div>
    </div>

    <!-- ì‹ ì¥ -->
    <div class="comparison-row">
        <div class="left-value">
            {% set height1_str = card1.basic_info.height|default('0cm') %}
            {% set height2_str = card2.basic_info.height|default('0cm') %}
            {% set height1 = height1_str.replace('cm', '')|int %}
            {% set height2 = height2_str.replace('cm', '')|int %}
            {% if height1 > height2 %}
            <span class="stat-diff left">{{ height1 - height2 }} â–²</span>
            {% endif %}
            {{ height1_str }}
        </div>
        <div class="center-label">ì‹ ì¥</div>
        <div class="right-value">
            {{ height2_str }}
            {% if height2 > height1 %}
            <span class="stat-diff">â–² {{ height2 - height1 }}</span>
            {% endif %}
        </div>
    </div>

    <!-- ëª¸ë¬´ê²Œ -->
    <div class="comparison-row">
        <div class="left-value">
            {% set weight1_str = card1.basic_info.weight|default('0kg') %}
            {% set weight2_str = card2.basic_info.weight|default('0kg') %}
            {% set weight1 = weight1_str.replace('kg', '')|int %}
            {% set weight2 = weight2_str.replace('kg', '')|int %}
            {% if weight1 > weight2 %}
            <span class="stat-diff left">{{ weight1 - weight2 }} â–²</span>
            {% endif %}
            {{ weight1_str }}
        </div>
        <div class="center-label">ëª¸ë¬´ê²Œ</div>
        <div class="right-value">
            {{ weight2_str }}
            {% if weight2 > weight1 %}
            <span class="stat-diff">â–² {{ weight2 - weight1 }}</span>
            {% endif %}
        </div>
    </div>

    <!-- âœ… ì²´í˜• (ìƒˆë¡œ ì¶”ê°€) -->
    <div class="comparison-row">
        <div class="left-value">
            {{ card1.basic_info.body_type|default('Unknown') }}
        </div>
        <div class="center-label">ì²´í˜•</div>
        <div class="right-value">
            {{ card2.basic_info.body_type|default('Unknown') }}
        </div>
    </div>

    <!-- ì£¼ë°œ-ì•½ë°œ -->
    <div class="comparison-row">
        <div class="left-value">
            {% set pref_foot = card1.game_info.preferred_foot|default('') %}
            {% set weak_foot = card1.game_info.weak_foot|default('') %}
            {% if 'L' in pref_foot %}
            <strong>{{ pref_foot }}</strong>-{{ weak_foot }}
            {% else %}
            {{ weak_foot }}-<strong>{{ pref_foot }}</strong>
            {% endif %}
        </div>
        <div class="center-label">ì£¼ë°œ/ì•½ë°œ</div>
        <div class="right-value">
            {% set pref_foot = card2.game_info.preferred_foot|default('') %}
            {% set weak_foot = card2.game_info.weak_foot|default('') %}
            {% if 'L' in pref_foot %}
            <strong>{{ pref_foot }}</strong>-{{ weak_foot }}
            {% else %}
            {{ weak_foot }}-<strong>{{ pref_foot }}</strong>
            {% endif %}
        </div>
    </div>

    <!-- êµ­ì  -->
    <div class="comparison-row">
        <div class="left-value">
            <div class="nation-content left">
                {% if card1.image_info.nation_img %}
                <img src="{{ card1.image_info.nation_img }}" class="nation-flag" alt="{{ card1.basic_info.nation }}">
                {% endif %}
                <span>{{ card1.basic_info.nation }}</span>
            </div>
        </div>
        <div class="center-label">êµ­ì </div>
        <div class="right-value">
            <div class="nation-content right">
                <span>{{ card2.basic_info.nation }}</span>
                {% if card2.image_info.nation_img %}
                <img src="{{ card2.image_info.nation_img }}" class="nation-flag" alt="{{ card2.basic_info.nation }}">
                {% endif %}
            </div>
        </div>
    </div>

    <!-- ê³ ìœ íŠ¹ì„± -->
    <div class="comparison-row">
        <div class="left-value">
            {% if card1.game_info.traits %}
            <div class="traits-content left">
                {% for trait in card1.game_info.traits %}
                {% if trait in TRAIT_MAPPING %}
                <img src="{{ TRAIT_MAPPING[trait] }}" class="trait-icon" alt="{{ trait }}" title="{{ trait }}">
                {% endif %}
                {% endfor %}
            </div>
            {% endif %}
        </div>
        <div class="center-label">ê³ ìœ íŠ¹ì„±</div>
        <div class="right-value">
            {% if card2.game_info.traits %}
            <div class="traits-content right">
                {% for trait in card2.game_info.traits %}
                {% if trait in TRAIT_MAPPING %}
                <img src="{{ TRAIT_MAPPING[trait] }}" class="trait-icon" alt="{{ trait }}" title="{{ trait }}">
                {% endif %}
                {% endfor %}
            </div>
            {% endif %}
        </div>
    </div>

    <!-- ì‹œì„¸ -->
    {% if card1.bp1 or card2.bp1 %}
    <div class="comparison-row header-row">
        <div class="left-value"></div>
        <div class="center-label">ì‹œì„¸</div>
        <div class="right-value"></div>
    </div>

    <!-- ì‹œì„¸ ìƒì„¸ (ìŠ¤í¬ë¡¤ ì˜ì—­) -->
    <div class="price-comparison-container">
        {% for i in range(1, 14) %}
        {% set price1 = card1['bp' ~ i] %}
        {% set price2 = card2['bp' ~ i] %}
        {% if (price1 and price1 > 0) or (price2 and price2 > 0) %}
        <div class="price-comparison-row">
            <!-- ì™¼ìª½ ê°€ê²© -->
            <div class="price-left">
                {% if price1 and price1 > 0 %}
                <span class="price-display">
                    {% if price1 >= 10000000000000000 %}
                    ({{ "%.1fê²½" % (price1 / 10000000000000000) }})
                    {% elif price1 >= 1000000000000 %}
                    ({{ "%.1fì¡°" % (price1 / 1000000000000) }})
                    {% elif price1 >= 100000000 %}
                    ({{ "%.1fì–µ" % (price1 / 100000000) }})
                    {% elif price1 >= 10000 %}
                    ({{ "%dë§Œ" % (price1 / 10000) }})
                    {% else %}
                    ({{ "{:,}".format(price1) }})
                    {% endif %}
                </span>
                {% endif %}
            </div>

            <!-- ê°•í™” ë‹¨ê³„ -->
            <div class="price-center">
                <div class="enhance-badge 
                {% if i == 1 %}enhance-level-1
                {% elif i <= 4 %}enhance-level-2-4
                {% elif i <= 7 %}enhance-level-5-7
                {% elif i <= 10 %}enhance-level-8-10
                {% else %}enhance-level-11-13
                {% endif %}">
                    {{ i }}
                </div>
            </div>

            <!-- ì˜¤ë¥¸ìª½ ê°€ê²© -->
            <div class="price-right">
                {% if price2 and price2 > 0 %}
                <span class="price-display">
                    {% if price2 >= 10000000000000000 %}
                    ({{ "%.1fê²½" % (price2 / 10000000000000000) }})
                    {% elif price2 >= 1000000000000 %}
                    ({{ "%.1fì¡°" % (price2 / 1000000000000) }})
                    {% elif price2 >= 100000000 %}
                    ({{ "%.1fì–µ" % (price2 / 100000000) }})
                    {% elif price2 >= 10000 %}
                    ({{ "%dë§Œ" % (price2 / 10000) }})
                    {% else %}
                    ({{ "{:,}".format(price2) }})
                    {% endif %}
                </span>
                {% endif %}
            </div>
        </div>
        {% endif %}
        {% endfor %}
    </div>
    {% endif %}

    <!-- ì„¸ë¶€ ìŠ¤íƒ¯ -->
    <div class="comparison-row header-row">
        <div class="left-value"></div>
        <div class="center-label">ì„¸ë¶€ ìŠ¤íƒ¯</div>
        <div class="right-value"></div>
    </div>

    <!-- ì‹œë®¬ë ˆì´í„° ì»¨íŠ¸ë¡¤ (ì–‘ìª½) -->
    <div class="simulators-wrapper">
        <!-- ì™¼ìª½ ì¹´ë“œ ì‹œë®¬ë ˆì´í„° -->
        <div class="simulator-section">
            <div class="simulator-controls-left">
                <div class="simulator-wrapper">
                    <select class="form-select simulator-select" id="enhanceLevel1" data-card="1">
                        <option value="0" selected>ğŸ”¥ ê°•í™”</option>
                        <option value="1" class="enhance-level-1">+1</option>
                        <option value="2" class="enhance-level-2-4">+2</option>
                        <option value="3" class="enhance-level-2-4">+3</option>
                        <option value="4" class="enhance-level-2-4">+4</option>
                        <option value="5" class="enhance-level-5-7">+5</option>
                        <option value="6" class="enhance-level-5-7">+6</option>
                        <option value="7" class="enhance-level-5-7">+7</option>
                        <option value="8" class="enhance-level-8-10">+8</option>
                        <option value="9" class="enhance-level-8-10">+9</option>
                        <option value="10" class="enhance-level-8-10">+10</option>
                        <option value="11" class="enhance-level-11-13">+11</option>
                        <option value="12" class="enhance-level-11-13">+12</option>
                        <option value="13" class="enhance-level-11-13">+13</option>
                    </select>
                    <span class="select-arrow">â–¼</span>
                </div>

                <div class="simulator-wrapper">
                    <select class="form-select simulator-select" id="adaptLevel1" data-card="1">
                        <option value="0" selected>ğŸ’« ì ì‘ë„</option>
                        <option value="1">Lv.1</option>
                        <option value="2">Lv.2</option>
                        <option value="3">Lv.3</option>
                        <option value="4">Lv.4</option>
                        <option value="5">Lv.5</option>
                    </select>
                    <span class="select-arrow">â–¼</span>
                </div>

                <div class="simulator-wrapper">
                    <select class="form-select simulator-select" id="teamColor1" data-card="1">
                        <option value="0" selected>ğŸ¤ íŒ€ì»¬ëŸ¬</option>
                        <option value="1">+1</option>
                        <option value="2">+2</option>
                        <option value="3">+3</option>
                        <option value="4">+4</option>
                        <option value="5">+5</option>
                        <option value="6">+6</option>
                        <option value="7">+7</option>
                        <option value="8">+8</option>
                        <option value="9">+9</option>
                    </select>
                    <span class="select-arrow">â–¼</span>
                </div>
            </div>
        </div>

        <!-- ì¤‘ì•™ ë¹ˆê³µê°„ -->
        <div class="simulator-divider"></div>

        <!-- ì˜¤ë¥¸ìª½ ì¹´ë“œ ì‹œë®¬ë ˆì´í„° -->
        <div class="simulator-section">
            <div class="simulator-controls-right">
                <div class="simulator-wrapper">
                    <select class="form-select simulator-select" id="teamColor2" data-card="2">
                        <option value="0" selected>ğŸ¤ íŒ€ì»¬ëŸ¬</option>
                        <option value="1">+1</option>
                        <option value="2">+2</option>
                        <option value="3">+3</option>
                        <option value="4">+4</option>
                        <option value="5">+5</option>
                        <option value="6">+6</option>
                        <option value="7">+7</option>
                        <option value="8">+8</option>
                        <option value="9">+9</option>
                    </select>
                    <span class="select-arrow">â–¼</span>
                </div>

                <div class="simulator-wrapper">
                    <select class="form-select simulator-select" id="adaptLevel2" data-card="2">
                        <option value="0" selected>ğŸ’« ì ì‘ë„</option>
                        <option value="1">Lv.1</option>
                        <option value="2">Lv.2</option>
                        <option value="3">Lv.3</option>
                        <option value="4">Lv.4</option>
                        <option value="5">Lv.5</option>
                    </select>
                    <span class="select-arrow">â–¼</span>
                </div>

                <div class="simulator-wrapper">
                    <select class="form-select simulator-select" id="enhanceLevel2" data-card="2">
                        <option value="0" selected>ğŸ”¥ ê°•í™”</option>
                        <option value="1" class="enhance-level-1">+1</option>
                        <option value="2" class="enhance-level-2-4">+2</option>
                        <option value="3" class="enhance-level-2-4">+3</option>
                        <option value="4" class="enhance-level-2-4">+4</option>
                        <option value="5" class="enhance-level-5-7">+5</option>
                        <option value="6" class="enhance-level-5-7">+6</option>
                        <option value="7" class="enhance-level-5-7">+7</option>
                        <option value="8" class="enhance-level-8-10">+8</option>
                        <option value="9" class="enhance-level-8-10">+9</option>
                        <option value="10" class="enhance-level-8-10">+10</option>
                        <option value="11" class="enhance-level-11-13">+11</option>
                        <option value="12" class="enhance-level-11-13">+12</option>
                        <option value="13" class="enhance-level-11-13">+13</option>
                    </select>
                    <span class="select-arrow">â–¼</span>
                </div>
            </div>
        </div>
    </div>

    <!-- ì„¸ë¶€ ìŠ¤íƒ¯ ë¹„êµ ë¦¬ìŠ¤íŠ¸ -->
    <div class="stats-comparison-container">
        <!-- ì™¼ìª½: ì¹´ë“œ1 ì„ í˜¸ í¬ì§€ì…˜ -->
        <div class="preferred-positions-left">
            {% for pos in card1.stats_info.main_overall.preferred_positions %}
            <div style="text-align: right;">
                <div style="font-size: 20px; font-weight: bold; margin-bottom: -5px;
                {% if pos.position in ['ST', 'CF', 'RW', 'LW'] %}
                color: #e74c3c;
                {% elif pos.position in ['CAM', 'LM', 'RM', 'CM', 'CDM'] %}
                color: #27ae60;
                {% elif pos.position in ['CB', 'RB', 'LB', 'RWB', 'LWB', 'SW'] %}
                color: #3498db;
                {% elif pos.position == 'GK' %}
                color: #f39c12;
                {% else %}
                color: var(--text-secondary);
                {% endif %}">{{ pos.position }}</div>
                <div class="preferred-pos-value" data-card="1" data-position="{{ pos.position }}"
                    data-original="{{ pos.overall }}"
                    style="font-size: 52px; font-weight: bold; color: var(--text-primary); line-height: 1;">
                    {{ pos.overall }}
                </div>
            </div>
            {% endfor %}
        </div>

        <!-- ì¤‘ì•™: ì„¸ë¶€ ìŠ¤íƒ¯ ë¦¬ìŠ¤íŠ¸ -->
        <div>
            {% set detailed_stats = [
            'ì†ë ¥', 'ê°€ì†ë ¥', 'ê³¨ ê²°ì •ë ¥', 'ìŠ› íŒŒì›Œ', 'ì¤‘ê±°ë¦¬ ìŠ›', 'ìœ„ì¹˜ ì„ ì •', 'ë°œë¦¬ìŠ›',
            'í˜ë„í‹° í‚¥', 'ì§§ì€ íŒ¨ìŠ¤', 'ì‹œì•¼', 'í¬ë¡œìŠ¤', 'ê¸´ íŒ¨ìŠ¤', 'í”„ë¦¬í‚¥', 'ì»¤ë¸Œ',
            'ë“œë¦¬ë¸”', 'ë³¼ ì»¨íŠ¸ë¡¤', 'ë¯¼ì²©ì„±', 'ë°¸ëŸ°ìŠ¤', 'ë°˜ì‘ ì†ë„', 'ëŒ€ì¸ ìˆ˜ë¹„', 'íƒœí´',
            'ê°€ë¡œì±„ê¸°', 'í—¤ë”', 'ìŠ¬ë¼ì´ë”© íƒœí´', 'ëª¸ì‹¸ì›€', 'ìŠ¤íƒœë¯¸ë„ˆ', 'ì ê·¹ì„±', 'ì í”„',
            'ì¹¨ì°©ì„±', 'GK ë‹¤ì´ë¹™', 'GK í•¸ë“¤ë§', 'GK í‚¥', 'GK ë°˜ì‘ì†ë„', 'GK ìœ„ì¹˜ ì„ ì •'
            ] %}

            {% for stat_name in detailed_stats %}
            {% set stat1 = card1.stats_info.detailed_stats.get(stat_name) %}
            {% set stat2 = card2.stats_info.detailed_stats.get(stat_name) %}
            {% if stat1 is not none or stat2 is not none %}
            <div class="stat-comparison-row">
                <!-- ì™¼ìª½ ìŠ¤íƒ¯ê°’ -->
                <div class="stat-left">
                    {% if stat1 is not none %}
                    <span class="stat-value" data-card="1" data-stat="{{ stat_name }}" data-original="{{ stat1 }}">{{
                        stat1 }}</span>
                    {% endif %}
                </div>

                <!-- ìŠ¤íƒ¯ëª… -->
                <div class="stat-center">
                    <span class="stat-label">{{ stat_name }}</span>
                </div>

                <!-- ì˜¤ë¥¸ìª½ ìŠ¤íƒ¯ê°’ -->
                <div class="stat-right">
                    {% if stat2 is not none %}
                    <span class="stat-value" data-card="2" data-stat="{{ stat_name }}" data-original="{{ stat2 }}">{{
                        stat2 }}</span>
                    {% endif %}
                </div>
            </div>
            {% endif %}
            {% endfor %}
        </div>

        <!-- ì˜¤ë¥¸ìª½: ì¹´ë“œ2 ì„ í˜¸ í¬ì§€ì…˜ -->
        <div class="preferred-positions-right">
            {% for pos in card2.stats_info.main_overall.preferred_positions %}
            <div style="text-align: left;">
                <div style="font-size: 20px; font-weight: bold; margin-bottom: -5px;
                {% if pos.position in ['ST', 'CF', 'RW', 'LW'] %}
                color: #e74c3c;
                {% elif pos.position in ['CAM', 'LM', 'RM', 'CM', 'CDM'] %}
                color: #27ae60;
                {% elif pos.position in ['CB', 'RB', 'LB', 'RWB', 'LWB', 'SW'] %}
                color: #3498db;
                {% elif pos.position == 'GK' %}
                color: #f39c12;
                {% else %}
                color: var(--text-secondary);
                {% endif %}">{{ pos.position }}</div>
                <div class="preferred-pos-value" data-card="2" data-position="{{ pos.position }}"
                    data-original="{{ pos.overall }}"
                    style="font-size: 52px; font-weight: bold; color: var(--text-primary); line-height: 1;">
                    {{ pos.overall }}
                </div>
            </div>
            {% endfor %}
        </div>
    </div>
</div>

<script>
    document.addEventListener('DOMContentLoaded', function () {
        // ì´ˆê¸° ìŠ¤íƒ¯ê°’ ì €ì¥
        const originalStats = {
            card1: {},
            card2: {}
        };

        // ê°•í™” ë‹¨ê³„ë³„ ëˆ„ì  ì¦ê°€ê°’
        const enhanceBonus = {
            0: 0, 1: 0, 2: 1, 3: 2, 4: 4, 5: 6, 6: 8, 7: 11,
            8: 15, 9: 17, 10: 19, 11: 21, 12: 24, 13: 27
        };

        // ì´ˆê¸°ê°’ ì €ì¥
        document.querySelectorAll('.stat-value').forEach(el => {
            const card = el.dataset.card;
            const stat = el.dataset.stat;
            const value = parseInt(el.dataset.original);

            if (!originalStats[`card${card}`][stat]) {
                originalStats[`card${card}`][stat] = value;
            }

            // ì´ˆê¸° ìƒ‰ìƒ ì ìš©
            updateColorClass(el, value);
        });

        // ì„ í˜¸ í¬ì§€ì…˜ ì´ˆê¸°ê°’ ì €ì¥
        document.querySelectorAll('.preferred-pos-value').forEach(el => {
            const card = el.dataset.card;
            const position = el.dataset.position;
            const value = parseInt(el.dataset.original);

            originalStats[`card${card}`][`pos_${position}`] = value;
        });

        // ìŠ¤íƒ¯ ì—…ë°ì´íŠ¸ í•¨ìˆ˜ (ì¹´ë“œë³„)
        function updateStatsForCard(cardNum) {
            const enhanceLevel = parseInt(document.getElementById(`enhanceLevel${cardNum}`).value);
            const adaptLevel = parseInt(document.getElementById(`adaptLevel${cardNum}`).value);
            const teamColor = parseInt(document.getElementById(`teamColor${cardNum}`).value);

            const enhancementBonus = enhanceBonus[enhanceLevel];
            const adaptBonus = adaptLevel > 0 ? adaptLevel - 1 : 0;
            const totalBonus = enhancementBonus + adaptBonus + teamColor;

            // í•´ë‹¹ ì¹´ë“œì˜ ìŠ¤íƒ¯ë§Œ ì—…ë°ì´íŠ¸
            document.querySelectorAll(`.stat-value[data-card="${cardNum}"]`).forEach(el => {
                const stat = el.dataset.stat;
                const original = originalStats[`card${cardNum}`][stat];

                if (original !== undefined) {
                    const newValue = original + totalBonus;
                    el.textContent = newValue;
                    updateColorClass(el, newValue);
                }
            });

            // ì„ í˜¸ í¬ì§€ì…˜ ì˜¤ë²„ë¡¤ ì—…ë°ì´íŠ¸
            document.querySelectorAll(`.preferred-pos-value[data-card="${cardNum}"]`).forEach(el => {
                const position = el.dataset.position;
                const original = originalStats[`card${cardNum}`][`pos_${position}`];

                if (original !== undefined) {
                    const newValue = original + totalBonus;
                    el.textContent = newValue;
                }
            });

            // ì°¨ì´ê°’ ì—…ë°ì´íŠ¸
            updateDifferences();
        }

        // ì°¨ì´ê°’ ì¬ê³„ì‚°
        function updateDifferences() {
            document.querySelectorAll('.stat-comparison-row').forEach(row => {
                const leftContainer = row.querySelector('.stat-left');
                const rightContainer = row.querySelector('.stat-right');
                const leftValue = leftContainer.querySelector('.stat-value');
                const rightValue = rightContainer.querySelector('.stat-value');

                if (leftValue && rightValue) {
                    const left = parseInt(leftValue.textContent);
                    const right = parseInt(rightValue.textContent);
                    const diff = Math.abs(left - right);

                    // ê¸°ì¡´ ì°¨ì´ê°’ ìš”ì†Œ ì œê±°
                    const oldLeftDiff = leftContainer.querySelector('.stat-diff');
                    const oldRightDiff = rightContainer.querySelector('.stat-diff');
                    if (oldLeftDiff) oldLeftDiff.remove();
                    if (oldRightDiff) oldRightDiff.remove();

                    // ìƒˆë¡œ ìƒì„±
                    if (left > right && diff > 0) {
                        const diffSpan = document.createElement('span');
                        diffSpan.className = 'stat-diff left';
                        diffSpan.textContent = `${diff} â–²`;
                        leftContainer.insertBefore(diffSpan, leftValue);
                    } else if (right > left && diff > 0) {
                        const diffSpan = document.createElement('span');
                        diffSpan.className = 'stat-diff';
                        diffSpan.textContent = `â–² ${diff}`;
                        rightContainer.appendChild(diffSpan);
                    }
                }
            });
        }

        // ìƒ‰ìƒ í´ë˜ìŠ¤ ì—…ë°ì´íŠ¸ (card_detail.htmlê³¼ ë™ì¼)
        function updateColorClass(element, value) {
            let color;
            if (value >= 160) color = '#40E0D0';
            else if (value >= 150) color = '#FFE34D';
            else if (value >= 140) color = '#FFD700';
            else if (value >= 130) color = '#FF4444';
            else if (value >= 120) color = '#FF88FF';
            else if (value >= 110) color = '#DD77FF';
            else if (value >= 100) color = '#9966FF';
            else if (value >= 90) color = '#5599FF';
            else if (value >= 80) color = '#66CCFF';
            else if (value >= 70) color = '#4A4A4A';
            else color = '#999999';

            element.style.color = color;
        }

        // ì´ë²¤íŠ¸ ë¦¬ìŠ¤ë„ˆ ë“±ë¡ (ì¹´ë“œ1)
        document.getElementById('enhanceLevel1').addEventListener('change', () => updateStatsForCard(1));
        document.getElementById('adaptLevel1').addEventListener('change', () => updateStatsForCard(1));
        document.getElementById('teamColor1').addEventListener('change', () => updateStatsForCard(1));

        // ì´ë²¤íŠ¸ ë¦¬ìŠ¤ë„ˆ ë“±ë¡ (ì¹´ë“œ2)
        document.getElementById('enhanceLevel2').addEventListener('change', () => updateStatsForCard(2));
        document.getElementById('adaptLevel2').addEventListener('change', () => updateStatsForCard(2));
        document.getElementById('teamColor2').addEventListener('change', () => updateStatsForCard(2));

        // ì´ˆê¸° ì°¨ì´ê°’ ê³„ì‚°
        updateDifferences();
    });
</script>
{% endblock %}